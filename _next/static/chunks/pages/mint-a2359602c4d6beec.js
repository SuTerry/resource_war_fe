(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[687],{7537:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mint",function(){return n(8610)}])},8610:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return S}});var r=n(7568),a=n(1799),i=n(9396),u=n(414),s=n(5893),o=n(7294),c=n(1163),l=n(1438),p=n(2670),f=n(2660),h=n(3957),g=n(3893),d=n.n(g),m=n(1864),_=n.n(m),y=n(9669),w=n.n(y),v=n(8002),b=new(function(){function t(e){(0,l.Z)(this,t),this.nftStorage=new f.j3({token:e})}var e=t.prototype;return e.fileFromPath=function(t){return(0,r.Z)((function(){var e,n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return(0,p.Z)(t,File)?[2,t]:[4,h.readFile(t)];case 1:return e=r.sent(),n=d().getType(t),[2,new File([e],_().basename(t),{type:n})]}}))}))()},e.convertGatewayURL=function(t){return t.startsWith("ipfs:")?"https://nftstorage.link/ipfs/"+new URL(t).pathname.replace(/^\/\//,""):t},e.upload=function(t,e,n){var a=this;return(0,r.Z)((function(){var r;return(0,u.__generator)(this,(function(i){switch(i.label){case 0:return[4,a.fileFromPath(t)];case 1:return r=i.sent(),[4,a.nftStorage.store({image:r,name:e,description:n})];case 2:return[2,i.sent()]}}))}))()},e.getImageURL=function(t){var e=this;return(0,r.Z)((function(){var n,r;return(0,u.__generator)(this,(function(a){switch(a.label){case 0:return n=e.convertGatewayURL(t),[4,w().get(n)];case 1:return r=a.sent().data.image,[2,e.convertGatewayURL(r)]}}))}))()},t}())(v.uV),N=n(3032),x=n(6772),Z=BigInt(Math.pow(2,64))-BigInt(1);function k(t,e,n){return{type:"entry_function_payload",function:"0x3::token::create_collection_script",type_arguments:[],arguments:[t,e,n,Z.toString(),[!1,!1,!1]]}}function j(t,e,n,r,a){return{type:"entry_function_payload",function:"0x3::token::create_token_script",type_arguments:[],arguments:[t,e,n,"1",Z.toString(),r,a,"100","0",[!1,!1,!1,!1,!1],[],[],[]]}}var C=new x.WalletClient(v.UE,v.Zt);function S(){var t=(0,c.useRouter)(),e=(0,o.useState)(!1),n=e[0],l=e[1],p=(0,N.useWallet)(),f=p.account,h=p.signAndSubmitTransaction,g=(0,o.useState)(""),d=g[0],m=g[1],_=(0,o.useState)({collection:"",name:"",description:"",file:null}),y=_[0],w=_[1];function v(){return(v=(0,r.Z)((function(t){var e,n;return(0,u.__generator)(this,(function(r){return e=t.target.files[0],w((0,i.Z)((0,a.Z)({},y),{file:e})),(n=new FileReader).onload=function(t){m(t.target.result.toString())},n.readAsDataURL(e),[2]}))}))).apply(this,arguments)}function x(t,e){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)((function(t,e){return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,4]),[4,C.getCollection(t,e)];case 1:case 3:return n.sent(),[3,4];case 2:return n.sent(),[4,h(k(e,"_1200_dollars_per_hour","https://github.com/amovane/aptos-NFT-marketplace"),{gas_unit_price:100})];case 4:return[2]}}))}))).apply(this,arguments)}function S(){return(S=(0,r.Z)((function(){var e,n,r,a,i,s,o,c;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:if(e=y.collection,n=y.name,r=y.description,a=y.file,!f||!e||!n||!r||!a)return[2];l(!0),u.label=1;case 1:return u.trys.push([1,6,7,8]),i=f.address.toString(),[4,b.upload(a,n,r)];case 2:return s=u.sent(),[4,b.getImageURL(s.url)];case 3:return o=u.sent(),[4,x(i,e)];case 4:return u.sent(),[4,h(j(e,n,r,o,i),{gas_unit_price:100})];case 5:return u.sent(),l(!1),t.push("/dashboard"),[3,8];case 6:return c=u.sent(),console.log("Error create NFT: ",c),[3,8];case 7:return l(!1),[7];case 8:return[2]}}))}))).apply(this,arguments)}return(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsxs)("div",{className:"w-1/2 flex flex-col pb-12",children:[(0,s.jsx)("input",{placeholder:"Collection Name",className:"mt-8 p-4 input input-bordered input-primary w-full",onChange:function(t){return w((0,i.Z)((0,a.Z)({},y),{collection:t.target.value}))}}),(0,s.jsx)("input",{placeholder:"Token Name",className:"mt-8 p-4 input input-bordered input-primary w-full",onChange:function(t){return w((0,i.Z)((0,a.Z)({},y),{name:t.target.value}))}}),(0,s.jsx)("textarea",{placeholder:"Token Description",className:"mt-2 p-4 textarea textarea-primary input-lg w-full",onChange:function(t){return w((0,i.Z)((0,a.Z)({},y),{description:t.target.value}))}}),(0,s.jsx)("input",{type:"file",name:"Asset",className:"my-4",onChange:function(t){return v.apply(this,arguments)}}),d&&(0,s.jsx)("img",{className:"rounded mt-4",width:"350",src:d}),(0,s.jsx)("button",{onClick:function(){return S.apply(this,arguments)},className:(n?"loading ":"")+"btn btn-primary font-bold mt-4  text-white rounded p-4 shadow-lg",children:"Mint NFT"})]})})}},3957:function(){}},function(t){t.O(0,[772,258,774,888,179],(function(){return e=7537,t(t.s=e);var e}));var e=t.O();_N_E=e}]);